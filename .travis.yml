language: java

branches:
  only:
    - master

env:
  global:
    - secure:
jobs:
  include:
    - stage: AdminTests
      name: Admin Tests
      script:
        - DRIVER=chrome mvn -P suite -DsuiteFile=admin.xml surefire:test --errors

    - stage: EmployeeTests
      name: Employee Tests
      script:
        - DRIVER=chrome mvn -P suite -DsuiteFile=employee.xml surefire:test --errors

    - stage: Smoketests
      name: Admin and Employee Tests
      script:
        - DRIVER=chrome mvn -P suite -DsuiteFile=smokeTests.xml surefire:test --errors

stages:
  - Regression

notifications:
  slack:
    - rooms:
      on_success: always
      on_failure: never
      on_pull_requests: false
    - rooms:
      on_success: never
      on_failure: always
      on_pull_requests: false

  email:
    recipients:
      - thomas@mindrglobal.com
    on_success: never
    on_failure: always
